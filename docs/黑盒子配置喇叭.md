# 黑盒子配置喇叭

黑盒子中内置了喇叭，如果未能成功播放，请按下面步骤配置：

## 1. 编辑 `/etc/rc.local`，添加 GPIO 初始化命令

```bash
sudo vim /etc/rc.local
```

在 `exit 0` 之前添加以下内容：

```bash
echo 487 > /sys/class/gpio/export
echo out > /sys/class/gpio/gpio487/direction
echo 1 > /sys/class/gpio/gpio487/value
```

---

## 2. 安装相关音频播放软件

```bash
sudo apt update
sudo apt install sox libsox-fmt-all mplayer alsa-utils
```

---

## 3. 将用户（如 linaro）添加到 audio 组

```bash
sudo usermod -aG audio linaro
```

执行后需重新登录或重启设备使权限生效。

---

## 4. 使用 aplay 测试音频设备

列出音频设备：

```bash
aplay -l
```

如需播放测试音频，可用如下命令：

```bash
aplay /usr/share/sounds/alsa/Front_Center.wav
```

---

## 5. 音量调节

使用 alsamixer 命令调节音量：

```bash
alsamixer
```

在界面中使用方向键或鼠标滚轮调节音量，按 `Esc` 退出。

---

## 故障排查

如遇到问题，可检查：

- `/etc/rc.local` 是否正确执行（可查看 `dmesg` 或 `cat /sys/class/gpio/gpio487/value`）
- 用户是否已加入 audio 组
- 喇叭硬件是否正常